<nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark py-1 p-md-2">
	<div class="container-xl">
		<a class="navbar-brand py-0" routerLinkActive="active" routerLink="/">
			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="50" height="26" style="vertical-align: top;">
				<g opacity="1" fill="#FFFFFF" fill-opacity="1">
					<path d="M21.433336285213954,26.432510375976562 c0,0 1.5164591073989868,-1.600000023841858 2.729626441525113,-1.2000000476837158 c0,0 1.920848178601915,-0.20000000298023224 2.123042653944708,-0.4000000059604645 l-3.0329182147979736,-3.5 c0,0 -2.0219454765319824,-0.800000011920929 -2.527431845664978,-1.7000000476837158 c-0.2021945506661318,0 -0.6065836670630631,-0.5 -2.2241400723921174,-0.6000000238418579 c-3.2351128106581086,-0.20000000298023224 -4.95376651391723,0.10000000149011612 -4.95376651391723,0.10000000149011612 c-9.806435368352368,1.100000023841858 -8.08778190612793,1.2999999523162842 -13.547034307108788,3.799999952316284 c0,0 5.863642074770496,-4.300000190734863 8.08778190612793,-5 c2.6285290230777036,-0.800000011920929 6.065836429595947,-0.5 6.065836429595947,-0.5 s-5.661447237875677,0.10000000149011612 -10.716311411275,2 c-3.1340153922106992,1.2000000476837158 4.1449881304766905,-2.700000047683716 4.1449881304766905,-2.700000047683716 c0.8087782026645272,0 -7.784489891820385,1.399999976158142 -2.8307236189378386,0.10000000149011612 c4.448280144784235,-1.100000023841858 8.391073920435474,-3.700000047683716 8.391073920435474,-3.700000047683716 l3.7405991797911042,-2.799999952316284 c0,0 10.615213751792908,-7.099999904632568 16.579952521906762,-7.900000095367432 c0,0 0,0 0,0 c1.0109727382659912,-1.100000023841858 2.2241400723921174,-1.2999999523162842 3.639501761343695,-1.7999999523162842 c1.7186537032591218,-0.6000000238418579 2.931821037385248,-1.100000023841858 5.3581557056375,0.10000000149011612 c1.5164591073989868,0.800000011920929 2.123042653944708,2.299999952316284 2.123042653944708,2.299999952316284 s4.5493773221969604,1.399999976158142 5.762544415288403,3.200000047683716 c0,0 -4.650474499609686,-0.5 -5.661447237875677,-0.4000000059604645 c-0.8087782026645272,0.10000000149011612 -3.84169635720383,-0.10000000149011612 -5.3581557056375,1.899999976158142 c-6.874614813036487,9.399999618530273 -8.694365934743018,10.199999809265137 -12.434964873499439,12 c0,0 -1.2131673341261262,0.30000001192092896 0,0 c0,0 0.2021945506661318,-0.10000000149011612 0,0 c0,0 -0.9098754403359237,0.30000001192092896 -0.7076809047344597,0.699999988079071 l1.6175564053290543,3.9000000953674316 c0,0 0.6065836670630631,0.5 1.2131673341261262,0.5 c0.5054863691329956,0 3.9427937756512392,0.4000000059604645 4.650474499609686,1.2999999523162842"/>
				</g>
			</svg>
			Стивън Кинг
		</a>
		<button id="mainMenuToggler" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" routerLinkActive="active" routerLink="books" (click)="collapseMainMenuToggle()"><i class="fa fa-book"></i> Книги</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" routerLinkActive="active" routerLink="stories" (click)="collapseMainMenuToggle()"><i class="fa fa-file-o"></i> Разкази</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" routerLinkActive="active" routerLink="onscreen" (click)="collapseMainMenuToggle()"><i class="fa fa-film"></i> Екранизации</a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<div *ngIf='auth.user$ | async as user; else login'>
						<div class="dropdown">
							<a class="nav-link p-0" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="User Menu">
								<img src="{{ user.photoURL }}" style="width: 32px; border-radius: 50%;">
							</a>
							<div class="dropdown-menu dropdown-menu-right">
								<div class="media px-2" style="min-width: 280px;">
									<img src="{{ user.photoURL }}" class="mr-3 align-self-center" alt="Профилна снимка" style="width: 60px; max-height: 60px; border-radius: 50%;">
									<div class="media-body">
										<h5 class="mt-0 text-nowrap">{{ user.displayName }}</h5>
										<div class="text-nowrap">
											<button class="btn btn-primary btn-sm" (click)="auth.signOut()"><i class="fa fa-sign-out" aria-hidden="true"></i> Изход</button>
										</div>
									</div>
								</div>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" routerLink="settings" (click)="collapseMainMenuToggle()"><i class="fa fa-cog fa-fw mr-1 ml-n2"></i> Настройки</a>
								<a class="dropdown-item" routerLink="about" (click)="collapseMainMenuToggle()"><i class="fa fa-question-circle fa-fw mr-1 ml-n2"></i> Информация</a>
								<a class="dropdown-item click" (click)="darkModeSwitch(!darkModeSelected)">
									<i class="fa fa-lightbulb-o fa-fw mr-1 ml-n2"></i> Тъмен режим
									<div class="custom-control custom-switch float-right">
										<input type="checkbox" class="custom-control-input" id="darkSwitch" [checked]="this.darkModeSelected" (click)="darkModeSwitch(!darkModeSelected);collapseMainMenuToggle()">
										<label class="custom-control-label click" for="darkSwitch"></label>
									</div>
								</a>
								<a class="dropdown-item" routerLink="admin" (click)="collapseMainMenuToggle()" *ngIf="auth.isAdmin(user)"><i class="fa fa-database fa-fw mr-1 ml-n2"></i> Администрация</a>
							</div>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>

<ng-template #login>
	<div class="dropdown" *ngIf="auth.loadingAuth == null || auth.loadingAuth == false">
		<a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="User Menu">
			<i class="fa fa-user"></i>
		</a>
		<div class="dropdown-menu dropdown-menu-right">
			<div class="media px-2" style="min-width: 280px;">
				<div class="mr-3 align-self-center d-flex align-items-center" style="width: 60px; height: 60px; border-radius: 50%; background-color: darkgray;">
					<i class="fa fa-user fa-2x mx-auto text-white"></i>
				</div>
				<div class="media-body">
					<h5 class="mt-0 text-nowrap">Гост</h5>
					<div class="text-nowrap">
						<button class="btn btn-primary btn-sm" (click)="auth.googleSignin()"><i class="fa fa-google"></i> Влез с Google</button>
					</div>
				</div>
			</div>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" routerLink="settings"><i class="fa fa-cog fa-fw mr-1 ml-n2"></i> Настройки</a>
			<a class="dropdown-item" routerLink="about"><i class="fa fa-question-circle fa-fw mr-1 ml-n2"></i> Информация</a>
			<a class="dropdown-item click" (click)="darkModeSwitch(!darkModeSelected)">
				<i class="fa fa-lightbulb-o fa-fw mr-1 ml-n2"></i> Тъмен режим
				<div class="custom-control custom-switch float-right">
					<input type="checkbox" class="custom-control-input" id="darkSwitch" [checked]="this.darkModeSelected" (click)="darkModeSwitch(!darkModeSelected)">
					<label class="custom-control-label click" for="darkSwitch"></label>
				</div>
			</a>
		</div>
	</div>
</ng-template>
